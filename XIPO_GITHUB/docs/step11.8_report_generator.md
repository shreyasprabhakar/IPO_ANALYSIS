# Step 11.8: Automated IPO Analysis Report Generator — Testing Guide

## Created / Modified Files

| File | Action |
|---|---|
| `backend/app/services/report_generator.py` | **NEW** — Generates comprehensive IPO analysis report using RAG pipeline |
| `backend/app/routes/report.py` | **NEW** — `POST /api/report/generate` endpoint |
| `backend/app/main.py` | **MODIFIED** — Registered `report_router` |

## How to Test

### 1. Prerequisites

You must already have:
- FAISS index built for the company (via `POST /api/faiss/build`)
- Ollama running locally on port 11434 with `llama3:8b` model

### 2. Start the server

```bash
cd backend
uvicorn app.main:app --reload
```

### 3. Open Swagger UI

Navigate to **http://localhost:8000/docs**

### 4. Test the endpoint

Use `POST /api/report/generate` with:

```json
{
  "company_name": "Reva Diamonds",
  "top_k": 6
}
```

### 5. Expected response structure

```json
{
  "company_name": "Reva Diamonds",
  "report": {
    "company_overview": "Reva Diamonds is a diamond manufacturing company...",
    "business_model": "The company generates revenue through...",
    "objects_of_issue": "The IPO proceeds will be used for...",
    "strengths": "Key competitive advantages include...",
    "key_risks": "Major risks mentioned in the prospectus include...",
    "financial_highlights": "Key financial metrics show...",
    "final_verdict": "This IPO may be suitable for... (Not financial advice)"
  }
}
```

> **Note:** Each section contains a detailed answer generated by the RAG pipeline. The actual content depends on what's available in the company's RHP document. Answers are professional and do NOT mention technical terms like "chunks", "FAISS", or "retrieval".

### 6. Understanding the report sections

| Section | Purpose |
|---|---|
| `company_overview` | Brief overview of what the company does |
| `business_model` | How the company generates revenue |
| `objects_of_issue` | How IPO proceeds will be used |
| `strengths` | Key competitive advantages |
| `key_risks` | Major risks and challenges |
| `financial_highlights` | Key financial metrics and performance |
| `final_verdict` | Investment perspective (not financial advice) |

## What is NOT implemented (by design)

- Streamlit / frontend UI for report viewing
- Report saving to file (only returned via API)
- No new pip dependencies added
